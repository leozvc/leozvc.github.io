<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>JSON-RPC 2.0 规范 - wiki . leozvc</title>
        <meta name="keywords" content="wiki, leozvc, php, golang, javascript, linux"/>
        <meta name="description" content="记录生活中的点滴wiki"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/">Home</a>&nbsp;»&nbsp;<a href="/#Specification">Specification</a>&nbsp;»&nbsp;JSON-RPC 2.0 规范</div>
</div>
<div class="clearfix"></div>
<div id="title">JSON-RPC 2.0 规范</div>
  <div id="content">
  <ul>
<li>
<p>起源时间: 2010-03-26(根据2010-03-26版)</p>
</li>
<li>
<p>更新: 2013-01-04</p>
</li>
<li>
<p>作者: <a href="https://groups.google.com/forum/#!forum/json-rpc">JSON-RPC工作组</a>&lt; json-rpc@googlegroups.com &gt;</p>
</li>
<li>
<p>翻译:  leozvc &lt; xxfs91@gmail.com &gt;</p>
</li>
</ul>
<div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#1">1.概述</a></li>
<li><a href="#2">2.约定</a></li>
<li><a href="#3">3.兼容性</a></li>
<li><a href="#4">4.请求对象</a><ul>
<li><a href="#jsonrpc">jsonrpc</a></li>
<li><a href="#method">method</a></li>
<li><a href="#params">params</a></li>
<li><a href="#id">id</a></li>
<li><a href="#41">4.1通知</a></li>
<li><a href="#42">4.2参数结构</a></li>
<li><a href="#43">4.3响应对象</a></li>
<li><a href="#44">4.4错误对象</a></li>
</ul>
</li>
<li><a href="#5">5.批</a></li>
<li><a href="#6">6.例</a></li>
<li><a href="#7">7.扩展</a></li>
</ul>
</div>
<h2 id="1">1.概述</h2>
<p>JSON-RPC是一个无状态且轻量级的远程过程调用(RPC)协议。 本规范主要定义了一些数据结构及其相关的处理规则。它允许运行在基于socket,http等诸多不同消息传输环境的同一进程中。其使用<a href="http://www.json.org/">JSON</a>（<a href="http://www.ietf.org/rfc/rfc4627.txt">RFC 4627</a>）作为数据格式。  </p>
<p>它为简单而生!</p>
<h2 id="2">2.约定</h2>
<p>文档中关键字"MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"MAY"和 "OPTIONAL" 将在<a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a> 中得到详细的解释及描述。</p>
<p>由于JSON-RPC使用JSON，它具有与其相同的类型系统(见<a href="http://www.json.org">http://www.json.org</a>或<a href="http://www.ietf.org/rfc/rfc4627.txt">RFC 4627</a>)。JSON可以表示四个基本类型(String、Numbers、Booleans和Null)和两个结构化类型(Objects和Arrays)。 规范中，术语“Primitive”标记那4种原始类型，“Structured”标记两种结构化类型。任何时候文档涉及JSON数据类型，第一个字母都必须大写：Object，Array，String，Number，Boolean，Null。包括True和False也要大写。</p>
<p>在客户端与任何被匹配到的服务端之间交换的所有成员名字应是区分大小写的。 函数、方法、过程都可以认为是可以互换的。</p>
<p>客户端被定义为请求对象的来源及响应对象的处理程序。</p>
<p>服务器被定义为响应对象的起源和请求对象的处理程序。</p>
<p>该规范的一种实现为可以轻而易举的填补这两个角色,即使是在同一时间,同一客户端或其他不相同的客户端。 该规范不涉及复杂层。</p>
<h2 id="3">3.兼容性</h2>
<p>JSON-RPC 2.0 的请求对象和响应对象可能无法在现用的JSON-RPC 1.0 客户端或服务端工作，然而我们可以很容易在两个版本间区分出2.0，总会包含一个成员命名为 “jsonrpc” 且值为“2.0”， 而1.0版本是不包含的。大部分的2.0实现应该考虑尝试处理1.0的对象，即使不是对等的也应给其相关提示。</p>
<h2 id="4">4.请求对象</h2>
<p>发送一个请求对象至服务端代表一个rpc调用， 一个请求对象包含下列成员：</p>
<h6 id="jsonrpc">jsonrpc</h6>
<p>指定JSON-RPC协议版本的字符串，必须准确写为“2.0”</p>
<h6 id="method">method</h6>
<p>包含所要调用方法名称的字符串，表示为以rpc开头的方法名，用英文句号（U+002E or ASCII 46）连接rpc内部方法名及扩展名，并且不能在其他地方使用。</p>
<h6 id="params">params</h6>
<p>调用方法所需要的结构化数值，该成员参数可以被省略。</p>
<h6 id="id">id</h6>
<p>客户建立的一个标识符,必须包含一个字符串,数字,或如果包含空值。 如果它不包括它被认为是一个通知。 值一般不应该为空[1]和数字不应该包含小数部分[2]
服务器必须回答相同的值如果包含在响应对象。 这个成员用来两个对象之间的关联上下文。
[1]使用Null值id成员请求对象是气馁,因为该规范使用Null值为响应未知id。另外,因为json - rpc 1.0使用id值为空的处理通知这可能导致的混乱。
[2]部分地区可能有问题,因为许多十进制分数不能代表完全按照二进制分数。</p>
<h3 id="41">4.1通知</h3>
<p>一个请求对象没有通知“id”成员。 通知的请求对象表示客户的相应的响应对象缺乏兴趣,并且没有响应对象需要返回给客户端。 服务器不能回复通知,包括那些在一个批处理请求。
通知没有可证实的定义,因为他们没有返回的响应对象。 这样,客户端将不会意识到任何错误(如如。 “无效的参数”,“内部错误”)。</p>
<h3 id="42">4.2参数结构</h3>
<p>如果存在,必须提供rpc调用的参数作为一个结构化的值。 按照位置通过一个数组或者很通过一个对象。
位置:参数必须是一个数组,包含服务器中的值预期秩序。
很:参数必须是一个对象,与成员名称相匹配的服务器将参数名称。 没有预期的名字可能会导致一个错误产生。 名称必须完全匹配,包括方法的情况下,预期的参数。</p>
<h3 id="43">4.3响应对象</h3>
<p>发出rpc调用时,服务器必须回复响应,在通知的情况下除外。 响应表示为一个JSON对象,使用以下成员:
JsonRPC
一个字符串指定版本的json - rpc协议。 必须完全“2.0”。
结果
上需要这个成员的成功。
这个会员必须不存在如果有一个错误调用方法。
这个成员的值是由服务器上的方法调用。
错误
上需要这个成员的错误。
这个会员必须不存在期间如果没有错误触发调用。
这个成员的值必须是5.1节中定义的对象。
id
这个成员是必需的。
必须相同id的值在请求对象成员。
如果有一个错误在检测请求对象的id(例如解析错误/无效的请求),它必须为空。
结果成员或错误成员必须包括,但不得包含成员。</p>
<h3 id="44">4.4错误对象</h3>
<p>rpc调用时遇到错误,错误响应对象必须包含成员的值是一个对象,以下成员:
代码
这一数字表明发生的错误类型。
这必须是一个整数。
消息
一个字符串提供一个简短的描述错误。
消息应该被限制在一个简洁的一句话。
数据
一种原始的或结构化的值包含额外的信息错误。
这可以省略。
这个成员的值定义的服务器(如详细的错误信息,嵌套错误等)。
错误代码,包括-32768年到-32000年是留给预定义的错误。 在这个范围内的任何代码,而不是显式地定义下面是保留以供将来使用。 提出的错误代码几乎是相同的---ml - rpc在以下网址:http://xmlrpc-epi.sourceforge.net/specs/rfc.fault_codes.php
代码  消息  意义
-32700年 解析错误    无效的JSON是由服务器接收。
一个错误发生在服务器在解析JSON文本。
-32600年 无效的请求   JSON发送不是一个有效的请求对象。
-32601年 没有找到方法  该方法不存在/不可用。
-32602年 无效的参数   无效的方法参数。
-32603年 内部错误    内部json - rpc错误。
-32000年到-32099年 服务器错误   预留给实现定义的服务器错误。
剩余的空间可用于应用程序定义的错误。</p>
<h2 id="5">5.批</h2>
<p>同时发送多个请求对象,客户端可以发送充满请求对象数组。
服务器应该响应与含有相应的响应对象的数组,毕竟已经处理批处理请求的对象。 响应对象应该为每个请求对象存在,除了不应当有任何通知的响应对象。 服务器可以处理一批rpc调用一组并发任务,处理在任何顺序和并行性的宽度。
返回的响应对象被从一个批处理调用可能在任何顺序返回的数组中。 客户端应与上下文之间的请求对象和结果集的基于id的响应对象成员在每个对象。
如果批处理rpc调用本身不能被认为是一个有效的JSON数组或至少有一个值,服务器的响应必须是一个单一的响应对象。 如果没有响应对象数组是包含在响应被发送到客户端,服务器不能返回一个空数组,返回一无所有。</p>
<h2 id="6">6.例</h2>
<p>语法:
--&lt; data sent to Server
&lt;-- data="" sent="" to="" clientpre=""&gt;
rpc调用位置参数:
--&lt; {"jsonrpc": "2.0", "method": "subtract", "params": [42, 23], "id": 1}
&lt;-- jsonrpc="" result="" id="" br="" style="font-size:12px;font-style:normal;font-weight:normal;font-family:Menlo, Monaco,;" courier="" new="" monospacecolorrgb="" /&gt;
--&lt; {"jsonrpc": "2.0", "method": "subtract", "params": [23, 42], "id": 2}&lt;-- jsonrpc="" result="" -="" id="" pre=""&gt;
rpc调用命名参数:
--&lt; {"jsonrpc": "2.0", "method": "subtract", "params": {"subtrahend": 23, "minuend": 42}, "id": 3}&lt;-- jsonrpc="" result="" id="" --=""&gt; {"jsonrpc": "2.0", "method": "subtract", "params": {"minuend": 42, "subtrahend": 23}, "id": 4}&lt;-- jsonrpc="" result="" id="" pre=""&gt;
通知:
--&lt; {"jsonrpc": "2.0", "method": "update", "params": [1,2,3,4,5]}
--&lt; {"jsonrpc": "2.0", "method": "foobar"}
rpc调用不存在的方法:
--&lt; {"jsonrpc": "2.0", "method": "foobar", "id": "1"}
&lt;-- jsonrpc="" error="" code="" -="" message="" method="" not="" found="" id="" pre=""&gt;
无效的JSON rpc调用:
--&lt; {"jsonrpc": "2.0", "method": "foobar, "params": "bar", "baz]
&lt;-- jsonrpc="" error="" code="" -="" message="" parse="" id="" nullpre=""&gt;
无效的请求对象rpc调用:
--&lt; {"jsonrpc": "2.0", "method": 1, "params": "bar"}
&lt;-- jsonrpc="" error="" code="" -="" message="" invalid="" request="" id="" nullpre=""&gt;
无效的JSON rpc调用批处理:
--&lt; [  {"jsonrpc": "2.0", "method": "sum", "params": [1,2,4], "id": "1"},  {"jsonrpc": "2.0", "method"]&lt;-- jsonrpc="" error="" code="" -="" message="" parse="" id="" nullpre=""&gt;
rpc调用一个空数组:
--&lt; []&lt;-- jsonrpc="" error="" code="" -="" message="" invalid="" request="" id="" nullpre=""&gt;
rpc调用一个无效的批处理(不是空的):
--&lt; [1]
&lt;-- jsonrpc="" error="" code="" -="" message="" invalid="" request="" id="" nullpre=""&gt;
rpc调用无效的批处理:
--&lt; [1,2,3]
&lt;-- jsonrpc="" error="" code="" -="" message="" invalid="" request="" id="" null="" nullpre=""&gt;
rpc调用批处理:
--&lt; [
        {"jsonrpc": "2.0", "method": "sum", "params": [1,2,4], "id": "1"},
        {"jsonrpc": "2.0", "method": "notify_hello", "params": [7]},
        {"jsonrpc": "2.0", "method": "subtract", "params": [42,23], "id": "2"},
        {"foo": "boo"},
        {"jsonrpc": "2.0", "method": "foo.get", "params": {"name": "myself"}, "id": "5"},
        {"jsonrpc": "2.0", "method": "get_data", "id": "9"} 
    ]
&lt;-- br="" style="font-size:12px;font-style:normal;font-weight:normal;font-family:Menlo, Monaco,;" courier="" new="" monospacecolorrgb="" /&gt;        {"jsonrpc": "2.0", "result": 7, "id": "1"},
        {"jsonrpc": "2.0", "result": 19, "id": "2"},
        {"jsonrpc": "2.0", "error": {"code": -32600, "message": "Invalid Request"}, "id": null},
        {"jsonrpc": "2.0", "error": {"code": -32601, "message": "Method not found"}, "id": "5"},
        {"jsonrpc": "2.0", "result": ["hello", 5], "id": "9"}
    ]
rpc调用批处理(所有通知):
--&lt; [
 {"jsonrpc": "2.0", "method": "notify_sum", "params": [1,2,4]},
 {"jsonrpc": "2.0", "method": "notify_hello", "params": [7]}
 ]
&lt;-- nothing="" is="" returned="" for="" all="" notification="" batchespre=""&gt;</p>
<h2 id="7">7.扩展</h2>
<p>方法名与rpc开始的。 预留给系统扩展,不得用于其它任何事情。 每个系统扩展中定义一个相关的规范。 所有系统的扩展是可选的。
版权(C)2007 - 2010通过json - rpc工作组
这个文档,翻译可以用来实现json - rpc,它可能被复制和家具,和衍生作品评论或解释或协助其实现可能准备,复制,发布和分发,在全部或部分,没有任何形式的限制,前提是上面的版权声明和本段包括在所有此类副本和衍生作品。 然而,这个文档本身可能不会以任何方式bemodified。
有限的权限授予上面是永恒的,不会撤销。
这个文件和本文所包含的信息提供了“是”,所有的保证,明示或默示是否认,包括但不限于任何保证,使用这里的信息不会侵犯任何权利或任何隐含保证适销性或健身为特定目的。</p>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2014 leozvc.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>